<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
  <!-- Name -->
  <div>
    <label>Name:</label>
    <input formControlName="name" placeholder="Enter your name" />
    <div *ngIf="userForm.get('name')?.invalid && userForm.get('name')?.touched">
      <small *ngIf="userForm.get('name')?.errors?.['required']">Name is required.</small>
      <small *ngIf="userForm.get('name')?.errors?.['minlength']">Name must be at least 3 characters.</small>
    </div>
  </div>

  <!-- Skills -->
  <div formArrayName="skills">
    <h3>Skills</h3>
    <button type="button" (click)="addSkill()">+ Add Skill</button>
    <div *ngFor="let skill of skills.controls; let i = index">
      <input [formControlName]="i" placeholder="Enter skill" />
      <button type="button" (click)="removeSkill(i)">Remove</button>

      <div *ngIf="skill.invalid && skill.touched">
        <small *ngIf="skill.errors?.['required']">Skill is required.</small>
        <small *ngIf="skill.errors?.['minlength']">Skill must be at least 2 characters.</small>
      </div>
    </div>
  </div>

  <!-- Addresses -->
  <div formArrayName="addresses">
    <h3>Addresses</h3>
    <button type="button" (click)="addAddress()">+ Add Address</button>
    <div *ngFor="let addr of addresses.controls; let i = index" [formGroupName]="i">
      <input formControlName="street" placeholder="Street" />
      <input formControlName="city" placeholder="City" />
      <input formControlName="pincode" placeholder="Pincode" />

      <button type="button" (click)="removeAddress(i)">Remove</button>

      <div *ngIf="addr.invalid && addr.touched">
        <small *ngIf="addr.get('street')?.errors?.['required']">Street is required.</small>
        <small *ngIf="addr.get('street')?.errors?.['minlength']">Street must be at least 3 characters.</small>

        <small *ngIf="addr.get('city')?.errors?.['required']">City is required.</small>

        <small *ngIf="addr.get('pincode')?.errors?.['required']">Pincode is required.</small>
        <small *ngIf="addr.get('pincode')?.errors?.['pattern']">Pincode must be 6 digits.</small>
      </div>
    </div>
  </div>

  <!-- Submit -->
  <button type="submit" [disabled]="userForm.invalid">Submit</button>
</form>

<pre>{{ userForm.value | json }}</pre>
